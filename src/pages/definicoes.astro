---
import Layout from '../layouts/Layout.astro';
import Logo from '../components/Logo.astro';
---

<Layout title="[AP] - Informa√ß√µes - Ficha">
  <div class="container">
    <Logo />
    
    <div class="logo-subtitle-custom">
      <h2>Informa√ß√µes - Ficha de Personagem</h2>
    </div>

    <section class="sheet-section">
      <!-- Sum√°rio -->
      <div class="guide-summary">
        <h3 class="summary-title">üìã Sum√°rio</h3>
        <div class="summary-list">
          <button class="summary-item" data-section="como-utilizar">
            <span class="summary-icon">üìñ</span>
            <span class="summary-text">Como Utilizar a Ficha</span>
          </button>
          <button class="summary-item" data-section="atributos">
            <span class="summary-icon">üí™</span>
            <span class="summary-text">Atributos</span>
          </button>
          <button class="summary-item" data-section="calculos-header">
            <span class="summary-icon">üßÆ</span>
            <span class="summary-text">C√°lculos Autom√°ticos do Header</span>
          </button>
          <button class="summary-item" data-section="status-automaticos">
            <span class="summary-icon">‚ö°</span>
            <span class="summary-text">Status Autom√°ticos</span>
          </button>
          <button class="summary-item" data-section="pericias">
            <span class="summary-icon">üéØ</span>
            <span class="summary-text">Per√≠cias</span>
          </button>
          <button class="summary-item" data-section="equipamentos">
            <span class="summary-icon">‚öîÔ∏è</span>
            <span class="summary-text">Equipamentos</span>
          </button>
          <button class="summary-item" data-section="habilidades">
            <span class="summary-icon">‚ú®</span>
            <span class="summary-text">Habilidades</span>
          </button>
          <button class="summary-item" data-section="rolagem-dados">
            <span class="summary-icon">üé≤</span>
            <span class="summary-text">Rolagem de Dados</span>
          </button>
          <button class="summary-item" data-section="salvamento">
            <span class="summary-icon">üíæ</span>
            <span class="summary-text">Salvamento e Exporta√ß√£o</span>
          </button>
          <button class="summary-item" data-section="foto-personagem">
            <span class="summary-icon">üñºÔ∏è</span>
            <span class="summary-text">Foto do Personagem</span>
          </button>
          <button class="summary-item" data-section="sistema-nivelamento">
            <span class="summary-icon">‚¨ÜÔ∏è</span>
            <span class="summary-text">Sistema de Nivelamento</span>
          </button>
        </div>
      </div>

      <div class="guide-content">
        <div class="guide-section accordion-section" id="como-utilizar">
          <button class="accordion-header">
            <h3 class="guide-section-title">üìñ Como Utilizar a Ficha</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>A ficha de personagem do An√°tema Prof√©tico foi desenvolvida para facilitar a cria√ß√£o e gerenciamento de seus personagens. Siga os passos abaixo:</p>
              <ol class="guide-list">
                <li><strong>Informa√ß√µes Gerais:</strong> Preencha o nome do jogador, nome do personagem, idade, profiss√£o e pronomes (sele√ß√£o m√∫ltipla: Ele/Dele, Ela/Dela, Elu/Delu ou Todos). Voc√™ pode adicionar uma foto do personagem usando uma URL de imagem (ex: Imgur).</li>
                <li><strong>Informa√ß√µes do Personagem:</strong> Os valores de Vida, Mana, Sanidade e outras estat√≠sticas s√£o calculados automaticamente baseados nos atributos. Voc√™ pode adicionar valores tempor√°rios a Vida, Mana e Sanidade usando os campos pequenos ao lado dos t√≠tulos - estes valores somam aos m√°ximos. O movimento extra tamb√©m pode ser adicionado.</li>
                <li><strong>Atributos:</strong> Defina os valores dos 5 atributos principais (Brutalidade, Destreza, Complei√ß√£o, Mente e Sobrenatural). Os valores padr√£o come√ßam em 10.</li>
                <li><strong>N√≠vel e Caminho:</strong> O n√≠vel come√ßa em 0. Quando o n√≠vel for maior ou igual a 1, voc√™ pode preencher o Caminho e o Prest√≠gio em Sociedades Secretas. A Sequ√™ncia √© calculada automaticamente baseada no n√≠vel e exibida como "9¬™ sequ√™ncia", "8¬™ sequ√™ncia", etc.</li>
                <li><strong>Per√≠cias:</strong> Selecione o atributo base de cada per√≠cia e escolha o n√≠vel de treinamento (B√°sico, M√©dio, Avan√ßado, Expert ou Aterrorizante). O modificador √© calculado automaticamente: (Modificador do Atributo √∑ 2) + B√¥nus de Treinamento + Valor Extra.</li>
                <li><strong>Equipamentos:</strong> Adicione armas (com tipo: Arma branca, Arma de Fogo ou Arma m√°gica) e itens (com peso de 1-9). O peso total afeta o movimento quando excede o m√°ximo (Brutalidade √∑ 2).</li>
                <li><strong>Habilidades:</strong> Adicione habilidades do personagem, indicando se s√£o passivas ou ativas, o nome, a sequ√™ncia (1¬™ a 9¬™), o custo de mana (se ativa) e a descri√ß√£o.</li>
                <li><strong>Anota√ß√µes:</strong> Use as se√ß√µes (Sobre, Sess√µes, Aliados, Inimigos, Extras) para anotar informa√ß√µes importantes sobre o personagem e a campanha.</li>
                <li><strong>Status:</strong> Os status (Machucado, Morrendo, Insano) s√£o ativados automaticamente conforme as condi√ß√µes da ficha. Quando Morrendo, aparecem os testes de salvamento (3 sucessos ou 3 fracassos).</li>
                <li><strong>Salvar:</strong> A ficha salva automaticamente a cada 30 segundos e ap√≥s 2 segundos sem mudan√ßas. Voc√™ tamb√©m pode usar os bot√µes para salvar, exportar ou importar manualmente.</li>
              </ol>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="atributos">
          <button class="accordion-header">
            <h3 class="guide-section-title">üí™ Atributos</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>Os atributos s√£o as caracter√≠sticas fundamentais do personagem. Cada atributo varia de 0 a 30 e possui um modificador calculado pela f√≥rmula:</p>
              <div class="formula-box">
                <strong>Modificador = (Valor do Atributo - 10) √∑ 2</strong> (arredondado para baixo)
              </div>
              <ul>
                <li><strong>Brutalidade (FOR):</strong> Representa a for√ßa f√≠sica e capacidade de causar dano em combate corpo a corpo. Usado para per√≠cias como Atletismo e Luta.</li>
                <li><strong>Destreza (DEX):</strong> Representa agilidade, coordena√ß√£o e reflexos. Usado para per√≠cias como Acrobacia, Esquiva, Furtividade e Tiro.</li>
                <li><strong>Complei√ß√£o (CON):</strong> Representa resist√™ncia f√≠sica e sa√∫de. Usado para per√≠cias como Escutar e afeta a resist√™ncia a dano.</li>
                <li><strong>Mente (MEN):</strong> Representa intelig√™ncia, sabedoria e carisma. Usado para per√≠cias sociais e mentais como Charme, Convencimento, Intimida√ß√£o, Investiga√ß√£o, Percep√ß√£o, Psicoanalisar e Refletir.</li>
                <li><strong>Sobrenatural (POD):</strong> Representa conex√£o com for√ßas m√≠sticas e capacidade de usar magia. Usado para per√≠cias como Conjura√ß√£o e Mitos.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="calculos-header">
          <button class="accordion-header">
            <h3 class="guide-section-title">üßÆ C√°lculos Autom√°ticos do Header</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <h4>Vida M√°xima</h4>
              <div class="formula-box">
                <strong>Vida M√°xima = Brutalidade + Complei√ß√£o</strong>
              </div>
              <p>Representa os pontos de vida totais do personagem. O valor atual pode ser ajustado manualmente, mas n√£o pode exceder o m√°ximo. Voc√™ pode adicionar pontos tempor√°rios de vida usando o campo pequeno ao lado do t√≠tulo "Vida" - estes valores <strong>somam</strong> aos m√°ximos calculados.</p>

              <h4>Mana M√°xima</h4>
              <div class="formula-box">
                <strong>Mana M√°xima = Sobrenatural √ó 2</strong>
              </div>
              <p>Representa os pontos de mana totais, usados para lan√ßar feiti√ßos e usar habilidades m√°gicas. Voc√™ pode adicionar pontos tempor√°rios de mana usando o campo pequeno ao lado do t√≠tulo "Mana" - estes valores <strong>somam</strong> aos m√°ximos calculados.</p>

              <h4>Sanidade M√°xima</h4>
              <div class="formula-box">
                <strong>Sanidade M√°xima = Mente √ó 2</strong>
              </div>
              <p>Representa a sa√∫de mental do personagem, afetada por encontros com o sobrenatural e eventos traum√°ticos. Voc√™ pode adicionar pontos tempor√°rios de sanidade usando o campo pequeno ao lado do t√≠tulo "Sanidade" - estes valores <strong>somam</strong> aos m√°ximos calculados.</p>
              <p><strong>Importante:</strong> Quando voc√™ preencher o campo "Caminho" pela primeira vez, sua sanidade m√°xima ser√° reduzida em 10% (arredondado para cima). Esta redu√ß√£o acontece apenas uma vez.</p>

              <h4>Resist√™ncia a Dano F√≠sico</h4>
              <div class="formula-box">
                <strong>Resist√™ncia = Modificador de Complei√ß√£o + (Modificador de Brutalidade √∑ 2)</strong>
              </div>
              <p>Reduz o dano f√≠sico recebido. O segundo termo √© arredondado para baixo.</p>

              <h4>Movimento</h4>
              <div class="formula-box">
                <strong>Movimento Base = Destreza √∑ 2</strong> (em metros, arredondado para baixo)
              </div>
              <p>Representa a dist√¢ncia que o personagem pode se mover em um turno. O movimento pode ser modificado por:</p>
              <ul>
                <li><strong>Movimenta√ß√£o Extra:</strong> Um campo permite adicionar movimento extra (usado para habilidades que aumentam movimento).</li>
                <li><strong>Sobrecarga:</strong> Se o peso carregado exceder o m√°ximo, o movimento √© reduzido pela metade.</li>
                <li><strong>Status Machucado:</strong> Se a vida atual for menor que 50% da m√°xima, o movimento √© reduzido pela metade.</li>
                <li><strong>Status Morrendo:</strong> Se a vida atual for igual a 0, o movimento √© zerado.</li>
              </ul>
              <p>O movimento final √© calculado aplicando todas as modifica√ß√µes na ordem: base, depois sobrecarga/machucado, depois morrendo, e por √∫ltimo extra.</p>

              <h4>DT para Proj√©teis (Receber)</h4>
              <div class="formula-box">
                <strong>DT = 8 + Modificador de Destreza</strong>
              </div>
              <p>Dificuldade de Teste para evitar ser atingido por proj√©teis. Quanto maior, mais dif√≠cil de ser acertado.</p>

              <h4>N√≠vel e Sequ√™ncia</h4>
              <p>O <strong>N√≠vel</strong> do personagem come√ßa em 0 e pode ser aumentado conforme o personagem ganha experi√™ncia. Quando o n√≠vel for maior ou igual a 1, o campo "Caminho" fica dispon√≠vel para edi√ß√£o.</p>
              <p>A <strong>Sequ√™ncia</strong> √© calculada automaticamente baseada no n√≠vel do personagem e exibida como "9¬™ sequ√™ncia", "8¬™ sequ√™ncia", etc.:</p>
              <ul>
                <li>N√≠vel 1-2: 9¬™ sequ√™ncia</li>
                <li>N√≠vel 3-4: 8¬™ sequ√™ncia</li>
                <li>N√≠vel 5-6: 7¬™ sequ√™ncia</li>
                <li>N√≠vel 7-8: 6¬™ sequ√™ncia</li>
                <li>N√≠vel 9-10: 5¬™ sequ√™ncia</li>
                <li>N√≠vel 11-12: 4¬™ sequ√™ncia</li>
                <li>N√≠vel 13-14: 3¬™ sequ√™ncia</li>
                <li>N√≠vel 15-16: 2¬™ sequ√™ncia</li>
                <li>N√≠vel 17-20: 1¬™ sequ√™ncia</li>
              </ul>
              <p><strong>Nota:</strong> Quando o n√≠vel for 0, o Prest√≠gio em Sociedades Secretas fica desabilitado e mostra "--". Quando o n√≠vel for maior ou igual a 1, o Prest√≠gio fica dispon√≠vel para sele√ß√£o.</p>

              <h4>Prest√≠gio em Sociedades Secretas</h4>
              <p>O prest√≠gio √© selecionado atrav√©s de um dropdown com as seguintes op√ß√µes (indicadas por s√≠mbolos):</p>
              <ul>
                <li>‚óá <strong>Muito baixo</strong></li>
                <li>‚óá‚óá <strong>Baixo</strong></li>
                <li>‚óá‚óá‚óá <strong>M√©dio</strong></li>
                <li>‚óá‚óá‚óá‚óá <strong>Alto</strong></li>
                <li>‚óá‚óá‚óá‚óá‚óá <strong>Muito alto</strong></li>
                <li>‚óÜ <strong>Supremo</strong></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="status-automaticos">
          <button class="accordion-header">
            <h3 class="guide-section-title">‚ö° Status Autom√°ticos</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>Os status s√£o ativados automaticamente conforme as condi√ß√µes do personagem. Eles aparecem discretamente no Header quando ativos e n√£o podem ser marcados manualmente.</p>
              
              <h4>Machucado</h4>
              <p><strong>Condi√ß√£o:</strong> Vida atual menor que 50% da vida m√°xima (e vida atual maior que 0)</p>
              <p><strong>Efeito:</strong> O movimento do personagem √© reduzido pela metade.</p>

              <h4>Morrendo</h4>
              <p><strong>Condi√ß√£o:</strong> Vida atual igual a 0</p>
              <p><strong>Efeito:</strong> O movimento do personagem √© zerado e aparecem os "Testes de Salvamento". O personagem precisa fazer testes de salvamento (3 sucessos para estabilizar, 3 falhas para morrer).</p>
              <p>Os testes de salvamento aparecem automaticamente quando o status est√° ativo, com 3 checkboxes para sucessos (verde) e 3 para fracassos (vermelho).</p>

              <h4>Insano</h4>
              <p><strong>Condi√ß√£o:</strong> Sanidade atual menor que 50% da sanidade m√°xima</p>
              <p><strong>Efeito:</strong> Indica que o personagem est√° com a sanidade mental comprometida.</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="pericias">
          <button class="accordion-header">
            <h3 class="guide-section-title">üéØ Per√≠cias</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>As per√≠cias representam habilidades espec√≠ficas do personagem. O modificador de uma per√≠cia √© calculado da seguinte forma:</p>
              <div class="formula-box">
                <strong>Modificador de Per√≠cia = (Modificador do Atributo Base √∑ 2) + B√¥nus de Treinamento + Valor Extra</strong>
              </div>
              <p>Onde:</p>
              <ul>
                <li><strong>Modificador do Atributo Base √∑ 2:</strong> O modificador do atributo escolhido √© dividido por 2 e arredondado para baixo.</li>
                <li><strong>B√¥nus de Treinamento:</strong> Depende do n√≠vel de treinamento escolhido:
                  <ul>
                    <li>Nenhum: +0</li>
                    <li>B√°sico: +2</li>
                    <li>M√©dio: +4</li>
                    <li>Avan√ßado: +6</li>
                    <li>Expert: +8</li>
                    <li>Aterrorizante: +10</li>
                  </ul>
                </li>
                <li><strong>Valor Extra:</strong> Um b√¥nus adicional de 0 a 20 que pode ser adicionado manualmente.</li>
              </ul>
              <h4>Lista de Per√≠cias</h4>
              <ul>
                <li><strong>Acrobacia:</strong> Base em Destreza. Habilidades acrob√°ticas, equil√≠brio e manobras f√≠sicas.</li>
                <li><strong>Atletismo:</strong> Base em Brutalidade. Corrida, salto, nata√ß√£o e outras atividades f√≠sicas.</li>
                <li><strong>Charme:</strong> Base em Mente. Capacidade de ser carism√°tico e agrad√°vel.</li>
                <li><strong>Conjura√ß√£o:</strong> Base em Sobrenatural. Lan√ßar feiti√ßos e usar magia.</li>
                <li><strong>Convencimento:</strong> Base em Mente. Persuadir e convencer outros.</li>
                <li><strong>Escutar:</strong> Base em Complei√ß√£o. Percep√ß√£o auditiva e aten√ß√£o aos sons.</li>
                <li><strong>Esquiva:</strong> Base em Destreza. Evitar ataques e se mover rapidamente.</li>
                <li><strong>Furtividade:</strong> Base em Destreza. Mover-se silenciosamente e passar despercebido.</li>
                <li><strong>Intimida√ß√£o:</strong> Base em Mente. Assustar e intimidar outros.</li>
                <li><strong>Investiga√ß√£o:</strong> Base em Mente. Analisar pistas e descobrir informa√ß√µes.</li>
                <li><strong>Luta:</strong> Base em Brutalidade. Combate corpo a corpo.</li>
                <li><strong>Mitos:</strong> Base em Sobrenatural. Conhecimento sobre o sobrenatural e mitos.</li>
                <li><strong>Percep√ß√£o:</strong> Base em Mente. Notar detalhes e observar o ambiente.</li>
                <li><strong>Profiss√£o:</strong> Sem atributo base. Habilidades espec√≠ficas da profiss√£o do personagem.</li>
                <li><strong>Psicoanalisar:</strong> Base em Mente. Entender motiva√ß√µes e estados mentais.</li>
                <li><strong>Refletir:</strong> Base em Mente. Pensar criticamente e resolver problemas.</li>
                <li><strong>Tiro:</strong> Base em Destreza. Usar armas de longo alcance.</li>
                <li><strong>Ext.1, Ext.2, Ext.3:</strong> Per√≠cias extras personaliz√°veis. Voc√™ pode escolher o nome e o atributo base.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="equipamentos">
          <button class="accordion-header">
            <h3 class="guide-section-title">‚öîÔ∏è Equipamentos</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <h4>Armas</h4>
              <p>As armas possuem os seguintes campos:</p>
              <ul>
                <li><strong>Nome da arma:</strong> Nome da arma.</li>
                <li><strong>Tipo:</strong> Arma branca, Arma de Fogo ou Arma m√°gica.</li>
                <li><strong>Dano:</strong> Dano causado pela arma (ex: "1d6+2", "2d4").</li>
                <li><strong>Descri√ß√£o:</strong> Propriedades especiais, modificadores ou notas sobre a arma.</li>
              </ul>

              <h4>Itens</h4>
              <p>Os itens possuem os seguintes campos:</p>
              <ul>
                <li><strong>Nome do item:</strong> Nome do item.</li>
                <li><strong>Descri√ß√£o:</strong> Descri√ß√£o e propriedades do item.</li>
                <li><strong>Peso:</strong> Peso do item (1 a 9).</li>
              </ul>

              <h4>Sistema de Peso</h4>
              <div class="formula-box">
                <strong>Peso M√°ximo = Brutalidade √∑ 2</strong> (arredondado para baixo)
              </div>
              <p>O peso m√°ximo que o personagem pode carregar √© calculado automaticamente baseado na Brutalidade. Se o peso total dos itens exceder o m√°ximo:</p>
              <ul>
                <li>O peso atual fica destacado em vermelho.</li>
                <li>O movimento do personagem √© reduzido pela metade.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="habilidades">
          <button class="accordion-header">
            <h3 class="guide-section-title">‚ú® Habilidades</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>As habilidades representam poderes especiais, t√©cnicas ou capacidades √∫nicas do personagem. Cada habilidade possui os seguintes campos:</p>
              <ul>
                <li><strong>Tipo:</strong> Uma checkbox indica se a habilidade √© "Passiva" (sempre ativa) ou "Ativa" (requer uso).</li>
                <li><strong>Nome da habilidade:</strong> O nome da habilidade.</li>
                <li><strong>Sequ√™ncia:</strong> A sequ√™ncia da habilidade (1¬™ a 9¬™ sequ√™ncia), selecionada atrav√©s de um dropdown. Indica em qual n√≠vel de poder a habilidade se encontra.</li>
                <li><strong>Custo de mana:</strong> 
                  <ul>
                    <li>Se a habilidade for <strong>Passiva</strong>, o custo de mana fica como "-" e n√£o pode ser modificado.</li>
                    <li>Se a habilidade for <strong>Ativa</strong>, voc√™ pode definir o custo de mana (n√∫mero inteiro).</li>
                  </ul>
                </li>
                <li><strong>Descri√ß√£o:</strong> Descri√ß√£o detalhada da habilidade, seus efeitos e como utiliz√°-la.</li>
              </ul>
              <p>Voc√™ pode adicionar quantas habilidades quiser usando o bot√£o "+ Adicionar Habilidade" e remover habilidades clicando no bot√£o "‚úï" ao lado de cada uma.</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="rolagem-dados">
          <button class="accordion-header">
            <h3 class="guide-section-title">üé≤ Rolagem de Dados</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>O sistema usa um d20 como dado base. Para rolar um teste:</p>
              <ol>
                <li>Clique no bot√£o "Rolar" ao lado do atributo ou per√≠cia desejada.</li>
                <li>O sistema rola 1d20 e adiciona o modificador correspondente.</li>
                <li>O resultado aparece em um popup no canto inferior direito da tela.</li>
                <li>Se o resultado for 20, √© um <strong>cr√≠tico</strong> (sucesso autom√°tico).</li>
                <li>Se o resultado for 1, √© uma <strong>falha cr√≠tica</strong> (falha autom√°tica).</li>
              </ol>
              <p>O modificador usado na rolagem √© calculado automaticamente baseado no atributo ou per√≠cia selecionada.</p>
              <h4>Rolagem de Dados Customizados</h4>
              <p>No canto inferior direito da tela h√° um bot√£o que abre um menu para rolar outros tipos de dados:</p>
              <ul>
                <li>d4, d6, d8, d10, d12, d20, d100</li>
              </ul>
              <p>Voc√™ pode selecionar m√∫ltiplos dados e rol√°-los ao mesmo tempo. Os resultados aparecem em cascata no canto inferior direito, permanecendo vis√≠veis por 30 segundos ou at√© serem fechados manualmente.</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="salvamento">
          <button class="accordion-header">
            <h3 class="guide-section-title">üíæ Salvamento e Exporta√ß√£o</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>A ficha oferece v√°rias op√ß√µes para salvar seus dados:</p>
              <ul>
                <li><strong>Auto-Save:</strong> A ficha salva automaticamente a cada 30 segundos e tamb√©m ap√≥s 2 segundos sem mudan√ßas. Os dados s√£o salvos no navegador (localStorage) e s√£o mantidos mesmo ap√≥s fechar o navegador.</li>
                <li><strong>Salvar Localmente:</strong> Salva manualmente os dados no navegador. Os dados s√£o mantidos no mesmo dispositivo e navegador.</li>
                <li><strong>Exportar JSON:</strong> Baixa um arquivo JSON com todos os dados da ficha. Voc√™ pode salvar este arquivo em qualquer lugar e import√°-lo depois em outro dispositivo.</li>
                <li><strong>Importar JSON:</strong> Carrega dados de um arquivo JSON exportado anteriormente. √ötil para transferir ficha entre dispositivos ou fazer backup.</li>
                <li><strong>Limpar Ficha:</strong> Remove todos os dados da ficha atual, incluindo o salvamento local (use com cuidado!).</li>
              </ul>
              <p><strong>Nota:</strong> A funcionalidade de salvamento est√° dispon√≠vel apenas na p√°gina "Ficha de personagem". Todos os dados da ficha s√£o salvos, incluindo foto, valores tempor√°rios, status, testes de salvamento, habilidades (com sequ√™ncia), pronomes (sele√ß√£o m√∫ltipla) e todas as se√ß√µes de anota√ß√µes.</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="foto-personagem">
          <button class="accordion-header">
            <h3 class="guide-section-title">üñºÔ∏è Foto do Personagem</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>Voc√™ pode adicionar uma foto do personagem na se√ß√£o de Informa√ß√µes B√°sicas. A foto aparece ao lado das informa√ß√µes b√°sicas.</p>
              <ul>
                <li>Cole o link da imagem (URL) no campo abaixo da foto.</li>
                <li>A imagem deve estar hospedada online (ex: Imgur, Google Drive com link p√∫blico).</li>
                <li>Formatos suportados: PNG, JPG, JPEG, GIF, WEBP.</li>
                <li>A URL da foto √© salva automaticamente junto com os outros dados da ficha.</li>
              </ul>
              <p>O link da imagem fica vis√≠vel abaixo da foto como uma forma de tooltip, permitindo f√°cil edi√ß√£o quando necess√°rio.</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="sistema-nivelamento">
          <button class="accordion-header">
            <h3 class="guide-section-title">‚¨ÜÔ∏è Sistema de Nivelamento</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>O sistema de nivelamento √© totalmente autom√°tico e din√¢mico. Quando voc√™ altera o n√≠vel do personagem, a ficha calcula automaticamente os b√¥nus que voc√™ recebe e mostra avisos nos setores relevantes.</p>
              
              <h4>Como Funciona</h4>
              <ol>
                <li><strong>Altere o n√≠vel:</strong> Quando voc√™ muda o n√≠vel do personagem no dropdown "N√≠vel" na se√ß√£o de Informa√ß√µes do Personagem, o sistema detecta a mudan√ßa automaticamente. <strong>Importante:</strong> Voc√™ s√≥ pode alterar o n√≠vel para um n√≠vel adjacente (acima ou abaixo do n√≠vel atual), garantindo que a ficha seja criada n√≠vel a n√≠vel.</li>
                <li><strong>Popup de confirma√ß√£o:</strong> Se voc√™ subiu de n√≠vel, aparecer√° um popup mostrando todos os b√¥nus que voc√™ ganhou.</li>
                <li><strong>Avisos din√¢micos:</strong> Avisos aparecem automaticamente nos setores relevantes da ficha:
                  <ul>
                    <li><strong>Atributos:</strong> Mostra quantos pontos voc√™ pode adicionar em atributos</li>
                    <li><strong>Vida/Mana/Sanidade:</strong> Mostra os b√¥nus que voc√™ ganhou (aplicados automaticamente)</li>
                    <li><strong>Habilidades:</strong> Lembra que voc√™ pode escolher uma habilidade de sua sequ√™ncia</li>
                    <li><strong>Per√≠cias:</strong> Mostra as op√ß√µes de treinamento dispon√≠veis</li>
                  </ul>
                </li>
                <li><strong>Aplicar b√¥nus:</strong> Voc√™ pode aplicar os b√¥nus diretamente nos campos correspondentes. Os avisos desaparecem quando voc√™ altera o n√≠vel novamente.</li>
              </ol>

              <h4>B√¥nus por N√≠vel</h4>
              <p>Todos os valores s√£o <strong>arredondados para cima</strong>. Os b√¥nus s√£o calculados automaticamente baseados nos valores atuais dos seus atributos.</p>
              
              <div class="formula-box">
                <strong>Exemplo:</strong> Se voc√™ tem Brutalidade 12 e Complei√ß√£o 14, o sistema usa 14 (o maior) para calcular os b√¥nus de vida.
              </div>

              <h4>N√≠vel 1</h4>
              <ul>
                <li>Escolha de caminho e de uma habilidade desse caminho</li>
                <li><strong>3 + MODMente</strong> de treinamentos b√°sicos (MODMente = modificador de Mente)</li>
              </ul>

              <h4>N√≠veis 2-5</h4>
              <ul>
                <li>1 ponto em um atributo √† sua escolha</li>
                <li>+1/2 do valor de Brutalidade ou Complei√ß√£o (o que for maior) em Vida</li>
                <li>+1/2 do valor de Sobrenatural em Mana</li>
                <li>+1/3 do valor de Mente em Sanidade</li>
                <li><strong>Escolha ENTRE:</strong> Uma habilidade de sua sequ√™ncia equivalente ou superior <strong>OU</strong> um treinamento b√°sico em uma per√≠cia</li>
              </ul>

              <h4>N√≠veis 6-9</h4>
              <ul>
                <li>1 ponto em um atributo √† sua escolha</li>
                <li>+1/2 do valor de Brutalidade ou Complei√ß√£o (o que for maior) em Vida</li>
                <li>+1/2 do valor de Sobrenatural em Mana</li>
                <li>+1/3 do valor de Mente em Sanidade</li>
                <li><strong>Escolha ENTRE:</strong> Uma habilidade de sua sequ√™ncia equivalente ou superior <strong>OU</strong> um treinamento (B√°sico ou Mudar uma de B√°sico ‚Üí M√©dio) em uma per√≠cia</li>
              </ul>

              <h4>N√≠veis 10-11</h4>
              <ul>
                <li>2 pontos em um atributo √† sua escolha (ou 1 em dois atributos diferentes)</li>
                <li>+o valor completo de Brutalidade ou Complei√ß√£o (o que for maior) em Vida</li>
                <li>+o valor completo de Sobrenatural em Mana</li>
                <li>+1/2 do valor de Mente em Sanidade</li>
                <li><strong>Escolha ENTRE:</strong> Uma habilidade de sua sequ√™ncia equivalente ou superior <strong>OU</strong> um treinamento (B√°sico ou Mudar uma de B√°sico ‚Üí M√©dio) em uma per√≠cia</li>
              </ul>

              <h4>N√≠veis 12-14</h4>
              <ul>
                <li>2 pontos em um atributo √† sua escolha (ou 1 em dois atributos diferentes)</li>
                <li>+o valor completo de Brutalidade ou Complei√ß√£o (o que for maior) em Vida</li>
                <li>+o valor completo de Sobrenatural em Mana</li>
                <li>+1/2 do valor de Mente em Sanidade</li>
                <li><strong>Escolha ENTRE:</strong> Uma habilidade de sua sequ√™ncia equivalente ou superior <strong>OU</strong> um treinamento (B√°sico, Mudar uma de B√°sico ‚Üí M√©dio ou de M√©dio ‚Üí Avan√ßado) em uma per√≠cia</li>
              </ul>

              <h4>N√≠veis 15-20</h4>
              <ul>
                <li>3 pontos em um atributo √† sua escolha (ou 1 em dois atributos diferentes)</li>
                <li>+o valor completo de Brutalidade ou Complei√ß√£o (o que for maior) em Vida</li>
                <li>+o valor completo de Sobrenatural em Mana</li>
                <li>+1/2 do valor de Mente em Sanidade</li>
                <li><strong>Escolha ENTRE:</strong> Uma habilidade de sua sequ√™ncia equivalente ou superior <strong>OU</strong> um treinamento (B√°sico, Mudar uma de B√°sico ‚Üí M√©dio ou de M√©dio ‚Üí Avan√ßado) em uma per√≠cia</li>
              </ul>

              <div class="info-box" style="margin-top: 1.5rem;">
                <div class="info-icon">üí°</div>
                <div class="info-content">
                  <p><strong>Dica:</strong> Os avisos aparecem apenas quando voc√™ sobe de n√≠vel. Se voc√™ quiser ver os avisos novamente, 
                  altere o n√≠vel para um valor diferente e depois volte para o n√≠vel atual. Os b√¥nus de Vida, Mana e Sanidade s√£o 
                  aplicados automaticamente quando voc√™ sobe de n√≠vel.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>

<script type="module">
  // Sistema de accordion
  document.addEventListener('DOMContentLoaded', () => {
    const accordionSections = document.querySelectorAll('.accordion-section');
    
    accordionSections.forEach(section => {
      const header = section.querySelector('.accordion-header');
      const content = section.querySelector('.accordion-content');
      const icon = section.querySelector('.accordion-icon');
      
      if (!header || !content) return;
      
      // Inicializar: primeira se√ß√£o aberta, outras fechadas
      if (section.id === 'como-utilizar') {
        section.classList.add('active');
        content.style.maxHeight = content.scrollHeight + 'px';
        if (icon) icon.textContent = '‚ñ≤';
      } else {
        content.style.maxHeight = '0px';
        if (icon) icon.textContent = '‚ñº';
      }
      
      header.addEventListener('click', () => {
        const isActive = section.classList.contains('active');
        
        // Fechar todas as outras se√ß√µes
        accordionSections.forEach(s => {
          if (s !== section) {
            s.classList.remove('active');
            const sContent = s.querySelector('.accordion-content');
            const sIcon = s.querySelector('.accordion-icon');
            if (sContent) sContent.style.maxHeight = '0px';
            if (sIcon) sIcon.textContent = '‚ñº';
          }
        });
        
        // Toggle da se√ß√£o atual
        if (isActive) {
          section.classList.remove('active');
          content.style.maxHeight = '0px';
          if (icon) icon.textContent = '‚ñº';
        } else {
          section.classList.add('active');
          content.style.maxHeight = content.scrollHeight + 'px';
          if (icon) icon.textContent = '‚ñ≤';
          
          // Scroll suave para a se√ß√£o
          setTimeout(() => {
            section.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }, 100);
        }
      });
    });
    
    // Sum√°rio - clicar em item abre a se√ß√£o correspondente
    const summaryItems = document.querySelectorAll('.summary-item');
    summaryItems.forEach(item => {
      item.addEventListener('click', () => {
        const sectionId = item.getAttribute('data-section');
        const section = document.getElementById(sectionId);
        
        if (section) {
          const header = section.querySelector('.accordion-header');
          if (header) {
            header.click();
          }
        }
      });
    });
  });
</script>

<style>
  .container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    gap: 2rem;
  }

  .logo-subtitle-custom {
    text-align: center;
    margin: -1rem 0 2rem 0;
  }

  .logo-subtitle-custom h2 {
    font-family: var(--font-accent);
    font-size: 1.2rem;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    opacity: 0.7;
    font-weight: 400;
  }

  .guide-summary {
    background: var(--color-bg-tertiary);
    border: 2px solid var(--color-border);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(139, 76, 141, 0.1);
  }

  .summary-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--color-text-accent);
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .summary-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  .summary-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
    font-family: var(--font-body);
    color: var(--color-text-primary);
    font-size: 0.95rem;
  }

  .summary-item:hover {
    border-color: var(--color-accent-primary);
    background: rgba(139, 76, 141, 0.1);
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(139, 76, 141, 0.2);
  }

  .summary-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .summary-text {
    flex: 1;
  }

  .guide-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .guide-section {
    background: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .guide-section:hover {
    border-color: var(--color-border-glow);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.4),
      0 0 20px rgba(139, 76, 141, 0.2);
  }

  .guide-section.active {
    border-color: var(--color-accent-primary);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.4),
      0 0 30px rgba(139, 76, 141, 0.3);
  }

  .accordion-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 2rem;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
  }

  .accordion-header:hover {
    background: rgba(139, 76, 141, 0.05);
  }

  .guide-section.active .accordion-header {
    background: rgba(139, 76, 141, 0.1);
    border-bottom: 1px solid var(--color-border);
  }

  .guide-section-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--color-text-accent);
    margin: 0;
    text-transform: none;
  }

  .accordion-icon {
    font-size: 1rem;
    color: var(--color-text-accent);
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 1rem;
  }

  .accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }

  .guide-text {
    font-family: var(--font-body);
    color: var(--color-text-primary);
    line-height: 1.8;
    font-size: 1rem;
    padding: 0 2rem 2rem 2rem;
  }

  .guide-text p {
    margin-bottom: 1rem;
  }

  .guide-text h4 {
    font-family: var(--font-heading);
    color: var(--color-text-accent);
    font-size: 1.3rem;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .guide-list {
    display: grid;
    gap: 1rem;
    margin: 1.5rem 0;
    padding: 0;
    list-style: none;
  }

  .guide-list li {
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-left: 3px solid var(--color-accent-primary);
    border-radius: 6px;
    padding: 1rem 1.5rem;
    transition: all 0.3s ease;
  }

  .guide-list li:hover {
    border-color: var(--color-border-glow);
    background: rgba(139, 76, 141, 0.05);
    transform: translateX(5px);
  }

  .guide-text ul:not(.guide-list),
  .guide-text ol:not(.guide-list) {
    margin-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .guide-text li:not(.guide-list li) {
    margin-bottom: 0.5rem;
  }

  .guide-text ul ul {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .formula-box {
    background: var(--color-bg-primary);
    border: 2px solid var(--color-accent-primary);
    border-radius: 8px;
    padding: 1rem 1.5rem;
    margin: 1rem 0;
    font-family: var(--font-heading);
    color: var(--color-text-accent);
    text-align: center;
    box-shadow: 
      0 0 15px rgba(139, 76, 141, 0.3),
      inset 0 0 10px rgba(139, 76, 141, 0.1);
  }

  .guide-text strong {
    color: var(--color-text-accent);
    font-weight: 600;
  }

  .info-box {
    display: flex;
    gap: 1rem;
    padding: 1.5rem;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-left: 4px solid #4caf50;
    border-radius: 8px;
    margin: 1.5rem 0;
  }

  .info-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .info-content {
    flex: 1;
    font-family: var(--font-body);
    color: var(--color-text-primary);
    line-height: 1.7;
  }

  @media (max-width: 768px) {
    .container {
      padding: 1rem;
    }

    .guide-summary {
      padding: 1.5rem;
    }

    .summary-list {
      grid-template-columns: 1fr;
    }

    .guide-section {
      padding: 0;
    }

    .accordion-header {
      padding: 1rem 1.5rem;
    }

    .guide-section-title {
      font-size: 1.2rem;
    }

    .guide-text {
      padding: 0 1.5rem 1.5rem 1.5rem;
    }
  }
</style>
