---
import Layout from '../layouts/Layout.astro';
import Logo from '../components/Logo.astro';
---

<Layout title="[AP] - C√°lculos">
  <div class="container">
    <Logo />
    
    <div class="logo-subtitle-custom">
      <h2>C√°lculos da Ficha</h2>
    </div>

    <section class="sheet-section">
      <!-- Sum√°rio -->
      <div class="guide-summary">
        <h3 class="summary-title">üìã Sum√°rio</h3>
        <div class="summary-list">
          <button class="summary-item" data-section="atributos">
            <span class="summary-icon">üí™</span>
            <span class="summary-text">Atributos e Modificadores</span>
          </button>
          <button class="summary-item" data-section="calculos-header">
            <span class="summary-icon">üßÆ</span>
            <span class="summary-text">C√°lculos do Header</span>
          </button>
          <button class="summary-item" data-section="pericias">
            <span class="summary-icon">üéØ</span>
            <span class="summary-text">C√°lculos de Per√≠cias</span>
          </button>
          <button class="summary-item" data-section="status-automaticos">
            <span class="summary-icon">‚ö°</span>
            <span class="summary-text">Status Autom√°ticos</span>
          </button>
          <button class="summary-item" data-section="sistema-nivelamento">
            <span class="summary-icon">‚¨ÜÔ∏è</span>
            <span class="summary-text">Sistema de Nivelamento</span>
          </button>
        </div>
      </div>

      <div class="guide-content">
        <div class="guide-section accordion-section" id="atributos">
          <button class="accordion-header">
            <h3 class="guide-section-title">üí™ Atributos e Modificadores</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>Os atributos s√£o as caracter√≠sticas fundamentais do personagem. Cada atributo varia de 0 a 30 e possui um modificador calculado pela f√≥rmula:</p>
              <div class="formula-box">
                <strong>Modificador = (Valor do Atributo - 10) √∑ 2</strong> (arredondado para baixo)
              </div>
              <p><strong>Exemplo:</strong> Se um atributo tem valor 14, o modificador ser√°: (14 - 10) √∑ 2 = 4 √∑ 2 = +2</p>
              <p><strong>Exemplo:</strong> Se um atributo tem valor 8, o modificador ser√°: (8 - 10) √∑ 2 = -2 √∑ 2 = -1</p>
              
              <h4>Atributos Principais</h4>
              <ul>
                <li><strong>Brutalidade (FOR):</strong> Representa a for√ßa f√≠sica e capacidade de causar dano em combate corpo a corpo. Usado para per√≠cias como Atletismo e Luta.</li>
                <li><strong>Destreza (DEX):</strong> Representa agilidade, coordena√ß√£o e reflexos. Usado para per√≠cias como Acrobacia, Esquiva, Furtividade e Tiro.</li>
                <li><strong>Complei√ß√£o (CON):</strong> Representa resist√™ncia f√≠sica e sa√∫de. Usado para per√≠cias como Escutar e afeta a resist√™ncia a dano.</li>
                <li><strong>Mente (MEN):</strong> Representa intelig√™ncia, sabedoria e carisma. Usado para per√≠cias sociais e mentais como Charme, Convencimento, Intimida√ß√£o, Investiga√ß√£o, Percep√ß√£o, Psicoanalisar e Refletir.</li>
                <li><strong>Sobrenatural (POD):</strong> Representa conex√£o com for√ßas m√≠sticas e capacidade de usar magia. Usado para per√≠cias como Conjura√ß√£o e Mitos.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="calculos-header">
          <button class="accordion-header">
            <h3 class="guide-section-title">üßÆ C√°lculos Autom√°ticos do Header</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <h4>Vida M√°xima</h4>
              <div class="formula-box">
                <strong>Vida M√°xima = Brutalidade + Complei√ß√£o + B√¥nus Tempor√°rio</strong>
              </div>
              <p>Representa os pontos de vida totais do personagem. O valor atual pode ser ajustado manualmente, mas n√£o pode exceder o m√°ximo. Voc√™ pode adicionar pontos tempor√°rios de vida usando o campo pequeno ao lado do t√≠tulo "Vida" - estes valores <strong>somam</strong> aos m√°ximos calculados.</p>
              <p><strong>Exemplo:</strong> Se Brutalidade = 12, Complei√ß√£o = 14 e B√¥nus Tempor√°rio = 5, ent√£o Vida M√°xima = 12 + 14 + 5 = 31</p>

              <h4>Mana M√°xima</h4>
              <div class="formula-box">
                <strong>Mana M√°xima = Sobrenatural √ó 2 + B√¥nus Tempor√°rio</strong>
              </div>
              <p>Representa os pontos de mana totais, usados para lan√ßar feiti√ßos e usar habilidades m√°gicas. Voc√™ pode adicionar pontos tempor√°rios de mana usando o campo pequeno ao lado do t√≠tulo "Mana" - estes valores <strong>somam</strong> aos m√°ximos calculados.</p>
              <p><strong>Exemplo:</strong> Se Sobrenatural = 15 e B√¥nus Tempor√°rio = 3, ent√£o Mana M√°xima = 15 √ó 2 + 3 = 30 + 3 = 33</p>

              <h4>Sanidade M√°xima</h4>
              <div class="formula-box">
                <strong>Sanidade M√°xima = Mente √ó 2 + B√¥nus Tempor√°rio</strong>
              </div>
              <p>Representa a sa√∫de mental do personagem, afetada por encontros com o sobrenatural e eventos traum√°ticos. Voc√™ pode adicionar pontos tempor√°rios de sanidade usando o campo pequeno ao lado do t√≠tulo "Sanidade" - estes valores <strong>somam</strong> aos m√°ximos calculados.</p>
              <p><strong>Importante:</strong> Quando voc√™ preencher o campo "Caminho" pela primeira vez, sua sanidade m√°xima ser√° reduzida em 10% (arredondado para cima). Esta redu√ß√£o acontece apenas uma vez.</p>
              <p><strong>Exemplo:</strong> Se Mente = 13 e B√¥nus Tempor√°rio = 2, ent√£o Sanidade M√°xima = 13 √ó 2 + 2 = 26 + 2 = 28. Se depois voc√™ escolher um Caminho, a sanidade ser√° reduzida em 10%: 28 √ó 0.1 = 2.8 ‚Üí arredondado para cima = 3. Nova Sanidade M√°xima = 28 - 3 = 25</p>
              <h4>Teste de Sanidade</h4>
              <div class="formula-box">
                <strong>B√¥nus do Teste = (Modificador Sobrenatural + Modificador Mente) √∑ 2</strong> (arredondado para baixo)
              </div>
              <p>O bot√£o <strong>üé≤ Sanidade</strong> ao lado do campo de Sanidade rola 1d20 + este b√¥nus automaticamente.</p>

              <h4>Resist√™ncia a Dano F√≠sico</h4>
              <div class="formula-box">
                <strong>Resist√™ncia = Modificador de Complei√ß√£o + (Modificador de Brutalidade √∑ 2)</strong>
              </div>
              <p>Reduz o dano f√≠sico recebido. O segundo termo √© arredondado para baixo.</p>
              <p><strong>Exemplo:</strong> Se Complei√ß√£o = 14 (mod +2) e Brutalidade = 12 (mod +1), ent√£o Resist√™ncia = 2 + (1 √∑ 2) = 2 + 0 = 2</p>

              <h4>Movimento</h4>
              <div class="formula-box">
                <strong>Movimento Base = Destreza √∑ 2</strong> (em metros, arredondado para baixo)
              </div>
              <p>Representa a dist√¢ncia que o personagem pode se mover em um turno. O movimento pode ser modificado por:</p>
              <ul>
                <li><strong>Movimenta√ß√£o Extra:</strong> Um campo permite adicionar movimento extra (usado para habilidades que aumentam movimento).</li>
                <li><strong>Sobrecarga:</strong> Se o peso carregado exceder o m√°ximo, o movimento √© reduzido pela metade.</li>
                <li><strong>Status Machucado:</strong> Se a vida atual for menor que 50% da m√°xima, o movimento √© reduzido pela metade.</li>
                <li><strong>Status Morrendo:</strong> Se a vida atual for igual a 0, o movimento √© zerado.</li>
              </ul>
              <p>O movimento final √© calculado aplicando todas as modifica√ß√µes na ordem: base, depois sobrecarga/machucado, depois morrendo, e por √∫ltimo extra.</p>
              <p><strong>Exemplo:</strong> Se Destreza = 16, Movimento Base = 16 √∑ 2 = 8m. Se estiver machucado: 8 √∑ 2 = 4m. Se adicionar +2 de movimento extra: 4 + 2 = 6m</p>

              <h4>DT para Proj√©teis (Receber)</h4>
              <div class="formula-box">
                <strong>DT = 8 + Modificador de Destreza</strong>
              </div>
              <p>Dificuldade de Teste para evitar ser atingido por proj√©teis. Quanto maior, mais dif√≠cil de ser acertado.</p>
              <p><strong>Exemplo:</strong> Se Destreza = 14 (mod +2), ent√£o DT = 8 + 2 = 10</p>

              <h4>N√≠vel e Sequ√™ncia</h4>
              <p>O <strong>N√≠vel</strong> do personagem come√ßa em 0 e pode ser aumentado conforme o personagem ganha experi√™ncia. Quando o n√≠vel for maior ou igual a 1, o campo "Caminho" fica dispon√≠vel para edi√ß√£o.</p>
              <p>A <strong>Sequ√™ncia</strong> √© calculada automaticamente baseada no n√≠vel do personagem e exibida como "9¬™ sequ√™ncia", "8¬™ sequ√™ncia", etc.:</p>
              <ul>
                <li>N√≠vel 1-2: 9¬™ sequ√™ncia</li>
                <li>N√≠vel 3-4: 8¬™ sequ√™ncia</li>
                <li>N√≠vel 5-6: 7¬™ sequ√™ncia</li>
                <li>N√≠vel 7-8: 6¬™ sequ√™ncia</li>
                <li>N√≠vel 9-10: 5¬™ sequ√™ncia</li>
                <li>N√≠vel 11-12: 4¬™ sequ√™ncia</li>
                <li>N√≠vel 13-14: 3¬™ sequ√™ncia</li>
                <li>N√≠vel 15-16: 2¬™ sequ√™ncia</li>
                <li>N√≠vel 17-20: 1¬™ sequ√™ncia</li>
              </ul>
              <p><strong>Nota:</strong> Quando o n√≠vel for 0, o Prest√≠gio em Sociedades Secretas fica desabilitado e mostra "--". Quando o n√≠vel for maior ou igual a 1, o Prest√≠gio fica dispon√≠vel para sele√ß√£o.</p>

              <h4>Prest√≠gio em Sociedades Secretas</h4>
              <p>O prest√≠gio √© selecionado atrav√©s de um dropdown com as seguintes op√ß√µes (indicadas por s√≠mbolos):</p>
              <ul>
                <li>‚óá <strong>Muito baixo</strong></li>
                <li>‚óá‚óá <strong>Baixo</strong></li>
                <li>‚óá‚óá‚óá <strong>M√©dio</strong></li>
                <li>‚óá‚óá‚óá‚óá <strong>Alto</strong></li>
                <li>‚óá‚óá‚óá‚óá‚óá <strong>Muito alto</strong></li>
                <li>‚óÜ <strong>Supremo</strong></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="pericias">
          <button class="accordion-header">
            <h3 class="guide-section-title">üéØ C√°lculos de Per√≠cias</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>As per√≠cias representam habilidades espec√≠ficas do personagem. O modificador de uma per√≠cia √© calculado da seguinte forma:</p>
              <div class="formula-box">
                <strong>Modificador de Per√≠cia = (Modificador do Atributo Base √∑ 2) + B√¥nus de Treinamento + Valor Extra</strong>
              </div>
              <p>Onde:</p>
              <ul>
                <li><strong>Modificador do Atributo Base √∑ 2:</strong> O modificador do atributo escolhido √© dividido por 2 e arredondado para baixo.</li>
                <li><strong>B√¥nus de Treinamento:</strong> Depende do n√≠vel de treinamento escolhido:
                  <ul>
                    <li>Nenhum: +0</li>
                    <li>B√°sico: +2</li>
                    <li>M√©dio: +4</li>
                    <li>Avan√ßado: +6</li>
                    <li>Expert: +8</li>
                    <li>Aterrorizante: +10</li>
                  </ul>
                </li>
                <li><strong>Valor Extra:</strong> Um b√¥nus adicional de 0 a 20 que pode ser adicionado manualmente.</li>
              </ul>
              <p><strong>Exemplo:</strong> Se o atributo base √© Destreza com valor 16 (mod +3), Treinamento M√©dio (+4) e Valor Extra de 2, ent√£o:</p>
              <p>Modificador = (3 √∑ 2) + 4 + 2 = 1 + 4 + 2 = +7</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="status-automaticos">
          <button class="accordion-header">
            <h3 class="guide-section-title">‚ö° Status Autom√°ticos</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>Alguns status s√£o ativados automaticamente conforme as condi√ß√µes do personagem. Outras condi√ß√µes podem ser marcadas manualmente pelo bot√£o <strong>‚ö° Condi√ß√µes</strong>, ao lado dos bot√µes de Descanso. Todas aparecem na √°rea de Status do Header quando ativas.</p>
              
              <h4>Machucado (autom√°tico)</h4>
              <div class="formula-box">
                <strong>Condi√ß√£o: Vida Atual < (Vida M√°xima √∑ 2) E Vida Atual > 0</strong>
              </div>
              <p><strong>Efeito:</strong> O movimento do personagem √© reduzido pela metade.</p>

              <h4>Morrendo (autom√°tico)</h4>
              <div class="formula-box">
                <strong>Condi√ß√£o: Vida Atual = 0</strong>
              </div>
              <p><strong>Efeito:</strong> O movimento do personagem √© zerado e aparecem os "Testes de Salvamento". O personagem precisa fazer testes de salvamento (3 sucessos para estabilizar, 3 falhas para morrer).</p>
              <p>Os testes de salvamento aparecem automaticamente quando o status est√° ativo, com 3 checkboxes para sucessos (verde) e 3 para fracassos (vermelho).</p>

              <h4>Insano (autom√°tico)</h4>
              <div class="formula-box">
                <strong>Condi√ß√£o: Sanidade Atual < (Sanidade M√°xima √∑ 2)</strong>
              </div>
              <p><strong>Efeito:</strong> Indica que o personagem est√° com a sanidade mental comprometida.</p>

              <h4>Condi√ß√µes manuais</h4>
              <p>Use o bot√£o <strong>‚ö° Condi√ß√µes</strong> ao lado dos bot√µes de Descanso para marcar condi√ß√µes adicionais (Atordoado, Cego, Surdo, Enfeiti√ßado, Assustado, Paralisado, Inconsciente, Agarrado, Restrito, Incapacitado, Escondido, Invis√≠vel). Machucado, Morrendo e Sobrecarregado s√£o aplicados automaticamente.</p>
            </div>
          </div>
        </div>

        <div class="guide-section accordion-section" id="sistema-nivelamento">
          <button class="accordion-header">
            <h3 class="guide-section-title">‚¨ÜÔ∏è Sistema de Nivelamento</h3>
            <span class="accordion-icon">‚ñº</span>
          </button>
          <div class="accordion-content">
            <div class="guide-text">
              <p>O sistema de nivelamento calcula automaticamente os b√¥nus baseados nos valores atuais dos atributos. Todos os valores s√£o <strong>arredondados para cima</strong>.</p>
              
              <h4>F√≥rmulas de B√¥nus por N√≠vel</h4>
              
              <h4>N√≠vel 1</h4>
              <ul>
                <li>Escolha de caminho e de uma habilidade desse caminho</li>
                <li><strong>Treinamentos B√°sicos = 3 + MODMente</strong> (MODMente = modificador de Mente)</li>
              </ul>
              <p><strong>Exemplo:</strong> Se Mente = 13 (mod +1), ent√£o Treinamentos = 3 + 1 = 4 treinamentos b√°sicos</p>

              <h4>N√≠veis 2-5</h4>
              <ul>
                <li>1 ponto em um atributo √† sua escolha</li>
                <li><strong>Vida = ‚åàMAX(Brutalidade, Complei√ß√£o) √∑ 2‚åâ</strong> (arredondado para cima)</li>
                <li><strong>Mana = ‚åàSobrenatural √∑ 2‚åâ</strong> (arredondado para cima)</li>
                <li><strong>Sanidade = ‚åàMente √∑ 3‚åâ</strong> (arredondado para cima)</li>
                <li>Escolha ENTRE: Uma habilidade de sua sequ√™ncia equivalente ou superior OU um treinamento b√°sico em uma per√≠cia</li>
              </ul>
              <p><strong>Exemplo:</strong> Se Brutalidade = 12, Complei√ß√£o = 14, Sobrenatural = 15, Mente = 13:</p>
              <p>Vida = ‚åà14 √∑ 2‚åâ = ‚åà7‚åâ = 7</p>
              <p>Mana = ‚åà15 √∑ 2‚åâ = ‚åà7.5‚åâ = 8</p>
              <p>Sanidade = ‚åà13 √∑ 3‚åâ = ‚åà4.33‚åâ = 5</p>

              <h4>N√≠veis 6-9</h4>
              <ul>
                <li>1 ponto em um atributo √† sua escolha</li>
                <li><strong>Vida = ‚åàMAX(Brutalidade, Complei√ß√£o) √∑ 2‚åâ</strong></li>
                <li><strong>Mana = ‚åàSobrenatural √∑ 2‚åâ</strong></li>
                <li><strong>Sanidade = ‚åàMente √∑ 3‚åâ</strong></li>
                <li>Escolha ENTRE: Uma habilidade de sua sequ√™ncia equivalente ou superior OU um treinamento (B√°sico ou Mudar uma de B√°sico ‚Üí M√©dio) em uma per√≠cia</li>
              </ul>

              <h4>N√≠veis 10-11</h4>
              <ul>
                <li>2 pontos em um atributo (ou 1 em dois atributos diferentes)</li>
                <li><strong>Vida = MAX(Brutalidade, Complei√ß√£o)</strong> (valor completo, sem divis√£o)</li>
                <li><strong>Mana = Sobrenatural</strong> (valor completo, sem divis√£o)</li>
                <li><strong>Sanidade = ‚åàMente √∑ 2‚åâ</strong> (arredondado para cima)</li>
                <li>Escolha ENTRE: Uma habilidade de sua sequ√™ncia equivalente ou superior OU um treinamento (B√°sico ou Mudar uma de B√°sico ‚Üí M√©dio) em uma per√≠cia</li>
              </ul>
              <p><strong>Exemplo:</strong> Se Brutalidade = 12, Complei√ß√£o = 14, Sobrenatural = 15, Mente = 13:</p>
              <p>Vida = 14 (valor completo)</p>
              <p>Mana = 15 (valor completo)</p>
              <p>Sanidade = ‚åà13 √∑ 2‚åâ = ‚åà6.5‚åâ = 7</p>

              <h4>N√≠veis 12-14</h4>
              <ul>
                <li>2 pontos em um atributo (ou 1 em dois atributos diferentes)</li>
                <li><strong>Vida = MAX(Brutalidade, Complei√ß√£o)</strong></li>
                <li><strong>Mana = Sobrenatural</strong></li>
                <li><strong>Sanidade = ‚åàMente √∑ 2‚åâ</strong></li>
                <li>Escolha ENTRE: Uma habilidade de sua sequ√™ncia equivalente ou superior OU um treinamento (B√°sico, Mudar uma de B√°sico ‚Üí M√©dio ou de M√©dio ‚Üí Avan√ßado) em uma per√≠cia</li>
              </ul>

              <h4>N√≠veis 15-20</h4>
              <ul>
                <li>3 pontos em um atributo (ou 1 em dois atributos diferentes)</li>
                <li><strong>Vida = MAX(Brutalidade, Complei√ß√£o)</strong></li>
                <li><strong>Mana = Sobrenatural</strong></li>
                <li><strong>Sanidade = ‚åàMente √∑ 2‚åâ</strong></li>
                <li>Escolha ENTRE: Uma habilidade de sua sequ√™ncia equivalente ou superior OU um treinamento (B√°sico, Mudar uma de B√°sico ‚Üí M√©dio ou de M√©dio ‚Üí Avan√ßado) em uma per√≠cia</li>
              </ul>

              <div class="info-box" style="margin-top: 1.5rem;">
                <div class="info-icon">üí°</div>
                <div class="info-content">
                  <p><strong>Nota:</strong> O s√≠mbolo ‚åà‚åâ representa arredondamento para cima (teto). MAX() retorna o maior valor entre os dois atributos.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>

<script type="module">
  // Sistema de accordion
  document.addEventListener('DOMContentLoaded', () => {
    const accordionSections = document.querySelectorAll('.accordion-section');
    
    accordionSections.forEach(section => {
      const header = section.querySelector('.accordion-header');
      const content = section.querySelector('.accordion-content');
      const icon = section.querySelector('.accordion-icon');
      
      if (!header || !content) return;
      
      // Inicializar: primeira se√ß√£o aberta, outras fechadas
      if (section.id === 'atributos') {
        section.classList.add('active');
        content.style.maxHeight = content.scrollHeight + 'px';
        if (icon) icon.textContent = '‚ñ≤';
      } else {
        content.style.maxHeight = '0px';
        if (icon) icon.textContent = '‚ñº';
      }
      
      header.addEventListener('click', () => {
        const isActive = section.classList.contains('active');
        
        // Fechar todas as outras se√ß√µes
        accordionSections.forEach(s => {
          if (s !== section) {
            s.classList.remove('active');
            const sContent = s.querySelector('.accordion-content');
            const sIcon = s.querySelector('.accordion-icon');
            if (sContent) sContent.style.maxHeight = '0px';
            if (sIcon) sIcon.textContent = '‚ñº';
          }
        });
        
        // Toggle da se√ß√£o atual
        if (isActive) {
          section.classList.remove('active');
          content.style.maxHeight = '0px';
          if (icon) icon.textContent = '‚ñº';
        } else {
          section.classList.add('active');
          content.style.maxHeight = content.scrollHeight + 'px';
          if (icon) icon.textContent = '‚ñ≤';
          
          // Scroll suave para a se√ß√£o
          setTimeout(() => {
            section.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }, 100);
        }
      });
    });
    
    // Sum√°rio - clicar em item abre a se√ß√£o correspondente
    const summaryItems = document.querySelectorAll('.summary-item');
    summaryItems.forEach(item => {
      item.addEventListener('click', () => {
        const sectionId = item.getAttribute('data-section');
        const section = document.getElementById(sectionId);
        
        if (section) {
          const header = section.querySelector('.accordion-header');
          if (header) {
            header.click();
          }
        }
      });
    });
  });
</script>

<style>
  .container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    gap: 2rem;
  }

  .logo-subtitle-custom {
    text-align: center;
    margin: -1rem 0 2rem 0;
  }

  .logo-subtitle-custom h2 {
    font-family: var(--font-accent);
    font-size: 1.2rem;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    opacity: 0.7;
    font-weight: 400;
  }

  .guide-summary {
    background: var(--color-bg-tertiary);
    border: 2px solid var(--color-border);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(139, 76, 141, 0.1);
  }

  .summary-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--color-text-accent);
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .summary-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  .summary-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
    font-family: var(--font-body);
    color: var(--color-text-primary);
    font-size: 0.95rem;
  }

  .summary-item:hover {
    border-color: var(--color-accent-primary);
    background: rgba(139, 76, 141, 0.1);
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(139, 76, 141, 0.2);
  }

  .summary-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .summary-text {
    flex: 1;
  }

  .guide-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .guide-section {
    background: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .guide-section:hover {
    border-color: var(--color-border-glow);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.4),
      0 0 20px rgba(139, 76, 141, 0.2);
  }

  .guide-section.active {
    border-color: var(--color-accent-primary);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.4),
      0 0 30px rgba(139, 76, 141, 0.3);
  }

  .accordion-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 2rem;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
  }

  .accordion-header:hover {
    background: rgba(139, 76, 141, 0.05);
  }

  .guide-section.active .accordion-header {
    background: rgba(139, 76, 141, 0.1);
    border-bottom: 1px solid var(--color-border);
  }

  .guide-section-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--color-text-accent);
    margin: 0;
    text-transform: none;
  }

  .accordion-icon {
    font-size: 1rem;
    color: var(--color-text-accent);
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 1rem;
  }

  .accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }

  .guide-text {
    font-family: var(--font-body);
    color: var(--color-text-primary);
    line-height: 1.8;
    font-size: 1rem;
    padding: 0 2rem 2rem 2rem;
  }

  .guide-text p {
    margin-bottom: 1rem;
  }

  .guide-text h4 {
    font-family: var(--font-heading);
    color: var(--color-text-accent);
    font-size: 1.3rem;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .guide-text ul {
    margin-left: 1.5rem;
    margin-bottom: 1rem;
  }

  .guide-text li {
    margin-bottom: 0.5rem;
  }

  .formula-box {
    background: var(--color-bg-primary);
    border: 2px solid var(--color-accent-primary);
    border-radius: 8px;
    padding: 1rem 1.5rem;
    margin: 1rem 0;
    font-family: var(--font-heading);
    color: var(--color-text-accent);
    text-align: center;
    box-shadow: 
      0 0 15px rgba(139, 76, 141, 0.3),
      inset 0 0 10px rgba(139, 76, 141, 0.1);
  }

  .guide-text strong {
    color: var(--color-text-accent);
    font-weight: 600;
  }

  .info-box {
    display: flex;
    gap: 1rem;
    padding: 1.5rem;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border);
    border-left: 4px solid #4caf50;
    border-radius: 8px;
    margin: 1.5rem 0;
  }

  .info-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .info-content {
    flex: 1;
    font-family: var(--font-body);
    color: var(--color-text-primary);
    line-height: 1.7;
  }

  @media (max-width: 768px) {
    .container {
      padding: 1rem;
    }

    .guide-summary {
      padding: 1.5rem;
    }

    .summary-list {
      grid-template-columns: 1fr;
    }

    .guide-section {
      padding: 0;
    }

    .accordion-header {
      padding: 1rem 1.5rem;
    }

    .guide-section-title {
      font-size: 1.2rem;
    }

    .guide-text {
      padding: 0 1.5rem 1.5rem 1.5rem;
    }
  }
</style>

